---
layout: post
comments: true
title: CTR и немного статистики
---

Все знают, что такое  CTR. Добавим только, что CTR можно рассматривать как вероятность клика по объявлению.
А теперь к сути поста.


## Два подхода к оценке CTR


В статистике существует два взгляда на мир. Назовем их традиционный (в литературе можно встретить термин frequentist approach) и байесовский. Именно с этих позиций и будем смотреть на CTR. Предположим, что у нас есть 4 рекламных кампании со следующими параметрами:


ID кампании | Клики | Показы | CTR 
--- | --- | --- | --- 
1 | 0 | 10 | 0%
2 | 1 | 10 | 10% 
3 | 1 | 100 | 1% 
4 | 10 | 1000 | 1%


С точки зрения первого подхода, CTR  - отношение кликов к показам. В значения CTR для 3 и 4 кампании можно поверить, но CTR 1 и 2 вызывают подозрения. Проблему решает второй подход. С точки зрения теоремы Байеса (почитать можно [тут], а лучше [тут]) 

## Байес

Следуя логике этого подхода мы не можем оценивать точечное значение вероятности. Мы можем только оценивать распределение вероятностей на основании наших **оценок** значения данного параметра. Это так называемая априорная оценка вероятности. Она опциональна, но может иметь некоторое влияние на конечный результат. Далее с появлением новых данных, первоначальная субъективная оценка корректируется с учетом этих данных. Графики плотности распределения CTR для 2-4 кампаний ниже:


![alt text][logo1]


На графике можно увидеть степень "уверенности" относительно значения CTR - чем больше показов, тем более точно мы можем говорить о границах CTR. 

То есть тут мы оперируем уже не одним числом, как в таблице выше, а такой вот штукой:


![alt text][int1]


То есть, мы просто строим распределение вероятностей (находим функцию f, которая лучше всего описывала бы наш взгляд на CTR и с нужной вероятностью оцениваем границы, в которых находится истинное значение)


![alt text][logo2]


Например, если мы знаем f, то такое выражение:


![alt text][int2]


говорит о том, что с вероятностью более 95% истинное значение \theta лежит в интервале от **a** о **b**.


## Заключение

Таким образом, байесовский подход позволяет отразить степень уверенности в значении CTR, а также определить его граница **с нужной степенью уверенности**. Это не значит, что не нужно пользоваться точечной оценкой этого параметра, нужно правильно оценивать свои шансы на ошибку в случае использования такой оценки. 
Целью этого поста была иллюстрация двух взглядов на измерение относительных величин. Чем лучше пользоваться, как это применять - это совершенно другие вопросы. 
Надеюсь, этот пост натолкнет вас на какие-то мысли или идеи о том, как можно использовать эти подходы. 




[тут]: https://en.wikipedia.org/wiki/Bayes%27_theorem
[тут]: http://www.yudkowsky.net/rational/bayes
[logo1]: https://m.realweb.ru/service/home/~/?auth=co&loc=ru&id=680&part=2
[int1]: http://i76.fastpic.ru/big/2016/0322/98/6debab40a0d02f5c14bfce905d86f298.png
[logo2]: https://www.chrisstucchio.com/blog_media/2013/bayesian_analysis_conversion_rates/posterior_distribution.png
[int2]: http://i76.fastpic.ru/big/2016/0322/c9/21886866f8efa7ab6f1c6bc8feee46c9.png
